<style>
/* Admin Temporal - Layout moderno e minimalista */
.admin-temporal {
    background: #fafafa;
    min-height: 100vh;
    padding-top: 50px;
}

/* Header com navegação e filtros */
.temporal-header {
    background: #fff;
    border-bottom: 1px solid #f0f0f0;
    position: fixed;
    top: 40px;
    left: 0;
    right: 0;
    z-index: 100;
    box-shadow: 0 2px 4px rgba(0,0,0,0.05);
}

.temporal-nav {
    padding: 1.5rem 2rem;
    display: flex;
    align-items: center;
    gap: 2rem;
    flex-wrap: wrap;
}

/* Navegação de pontos */
.point-navigation {
    display: flex;
    align-items: center;
    gap: 1rem;
}

.point-input {
    width: 100px;
    padding: 0.5rem 1rem;
    border: 1px solid #e5e5e5;
    font-size: 1rem;
    text-align: center;
    transition: all 0.2s;
}

.point-input:focus {
    outline: none;
    border-color: #333;
    box-shadow: 0 0 0 2px rgba(51,51,51,0.1);
}

.nav-btn {
    padding: 0.5rem 1rem;
    border: 1px solid #e5e5e5;
    background: #fff;
    font-size: 1rem;
    cursor: pointer;
    transition: all 0.15s;
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
}

.nav-btn:hover:not(:disabled) {
    background: #fafafa;
    border-color: #333;
}

.nav-btn:disabled {
    opacity: 0.4;
    cursor: not-allowed;
}

.nav-btn.primary {
    background: #333;
    color: #fff;
    border-color: #333;
}

.nav-btn.primary:hover:not(:disabled) {
    background: #111;
    border-color: #111;
}

.point-counter {
    font-size: 1rem;
    color: #666;
    font-weight: 400;
}

/* Filtros modernos */
.temporal-filters {
    padding: 1rem 2rem;
    background: #fafafa;
    border-top: 1px solid #f0f0f0;
    display: flex;
    gap: 2rem;
    align-items: center;
    flex-wrap: wrap;
}

.filter-group {
    display: flex;
    align-items: center;
    gap: 0.75rem;
}

.filter-label {
    font-size: 0.875rem;
    color: #666;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.filter-select {
    padding: 0.5rem 1rem;
    border: 1px solid #e5e5e5;
    background: #fff;
    font-size: 1rem;
    min-width: 150px;
    cursor: pointer;
    transition: all 0.2s;
}

.filter-select:focus {
    outline: none;
    border-color: #333;
    box-shadow: 0 0 0 2px rgba(51,51,51,0.1);
}

/* Radio buttons modernos */
.radio-group {
    display: flex;
    gap: 1rem;
    align-items: center;
}

.radio-option {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    cursor: pointer;
}

.radio-option input[type="radio"] {
    width: 16px;
    height: 16px;
    accent-color: #333;
}

.radio-option label {
    font-size: 0.875rem;
    color: #333;
    cursor: pointer;
    user-select: none;
}

/* Container principal */
.temporal-content {
    margin-top: 140px;
    padding: 2rem;
}

/* Grid de informações e tabela */
.content-grid {
    display: grid;
    grid-template-columns: 350px 1fr;
    gap: 2rem;
    margin-bottom: 2rem;
}

/* Painel de informações do ponto */
.point-info-panel {
    background: #fff;
    border: 1px solid #f0f0f0;
    height: fit-content;
    box-shadow: 0 2px 4px rgba(0,0,0,0.05);
}

.panel-header {
    padding: 1.5rem;
    border-bottom: 1px solid #f0f0f0;
    text-align: center;
}

.panel-title {
    font-size: 1.25rem;
    font-weight: 400;
    color: #333;
    margin: 0;
}

.panel-section {
    padding: 1.5rem;
    border-bottom: 1px solid #f0f0f0;
}

.panel-section:last-child {
    border-bottom: none;
}

.section-title {
    font-size: 0.875rem;
    font-weight: 500;
    color: #666;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: 1rem;
}

.info-item {
    display: flex;
    justify-content: space-between;
    align-items: baseline;
    margin-bottom: 0.5rem;
    font-size: 0.875rem;
}

.info-item:last-child {
    margin-bottom: 0;
}

.info-label {
    color: #666;
}

.info-value {
    color: #333;
    font-weight: 500;
}

/* Coordenadas */
.coordinates-box {
    background: #fafafa;
    padding: 1rem;
    border-radius: 4px;
    font-family: monospace;
    font-size: 0.875rem;
}

/* Estatísticas */
.stats-box {
    background: #e3f2fd;
    padding: 1rem;
    border-radius: 4px;
}

.stats-value {
    color: #1976d2;
    font-weight: 500;
}

/* Botões de ação */
.action-buttons {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    padding: 1.5rem;
}

.action-btn {
    padding: 0.5rem 1rem;
    border: 1px solid #e5e5e5;
    background: #fff;
    font-size: 0.875rem;
    cursor: pointer;
    transition: all 0.15s;
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
}

.action-btn:hover {
    border-color: #333;
    transform: translateY(-1px);
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.action-btn.warning {
    color: #f59e0b;
}

.action-btn.success {
    color: #10b981;
}

.action-btn.primary {
    color: #3b82f6;
}

.action-btn.danger {
    color: #ef4444;
}

.action-btn.info {
    color: #6b7280;
}

/* Tabela de inspeções */
.inspection-panel {
    background: #fff;
    border: 1px solid #f0f0f0;
    box-shadow: 0 2px 4px rgba(0,0,0,0.05);
    overflow: hidden;
}

.table-tabs {
    display: flex;
    border-bottom: 1px solid #f0f0f0;
    background: #fafafa;
}

.table-tab {
    padding: 1rem 1.5rem;
    border: none;
    background: none;
    font-size: 0.875rem;
    color: #666;
    cursor: pointer;
    transition: all 0.2s;
    position: relative;
}

.table-tab.active {
    color: #333;
    background: #fff;
}

.table-tab.active::after {
    content: '';
    position: absolute;
    bottom: -1px;
    left: 0;
    right: 0;
    height: 2px;
    background: #333;
}

.table-container {
    max-height: 300px;
    overflow: auto;
}

.inspection-table {
    width: 100%;
    border-collapse: collapse;
}

.inspection-table th {
    padding: 1rem;
    text-align: left;
    font-weight: 500;
    color: #666;
    background: #fafafa;
    border-bottom: 1px solid #f0f0f0;
    position: sticky;
    top: 0;
    z-index: 10;
}

.inspection-table td {
    padding: 1rem;
    border-bottom: 1px solid #fafafa;
}

.inspection-table tbody tr:hover {
    background: #fafafa;
}

.table-footer {
    background: #fafafa;
    padding: 1rem;
    font-weight: 500;
    border-top: 2px solid #f0f0f0;
}

/* Grid de mapas */
.maps-section {
    margin-top: 3rem;
}

.maps-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 1.5rem;
}

.maps-title {
    font-size: 1.5rem;
    font-weight: 400;
    color: #333;
}

.visparam-selector {
    display: flex;
    gap: 1rem;
    align-items: center;
}

.visparam-option {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.maps-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 1.5rem;
}

.map-card {
    background: #fff;
    border: 1px solid #f0f0f0;
    box-shadow: 0 2px 4px rgba(0,0,0,0.05);
    overflow: hidden;
    transition: all 0.2s;
}

.map-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
}

.map-header {
    padding: 1rem;
    background: #fafafa;
    border-bottom: 1px solid #f0f0f0;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.map-date {
    font-size: 0.875rem;
    color: #333;
    font-weight: 500;
}

.map-period {
    font-size: 0.75rem;
    color: #666;
    text-transform: uppercase;
}

.map-placeholder {
    height: 300px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #666;
}

.planet-button {
    position: absolute;
    top: 1rem;
    right: 1rem;
    z-index: 20;
}

.btn-icon {
    width: 36px;
    height: 36px;
    border-radius: 50%;
    border: 1px solid #e5e5e5;
    background: #fff;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.2s;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.btn-icon:hover {
    border-color: #333;
    transform: scale(1.1);
}

/* Gráficos */
.charts-section {
    margin-top: 3rem;
}

.chart-container {
    background: #fff;
    border: 1px solid #f0f0f0;
    padding: 2rem;
    margin-bottom: 2rem;
    box-shadow: 0 2px 4px rgba(0,0,0,0.05);
}

.chart-title {
    font-size: 1.25rem;
    font-weight: 400;
    color: #333;
    margin-bottom: 1.5rem;
}

/* Loading overlay */
.loading-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(255,255,255,0.9);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1000;
}

.loader {
    width: 40px;
    height: 40px;
    border: 3px solid #f0f0f0;
    border-top-color: #333;
    border-radius: 50%;
    animation: spin 1s linear infinite;
}

@keyframes spin {
    to { transform: rotate(360deg); }
}

/* Responsividade */
@media (max-width: 1024px) {
    .content-grid {
        grid-template-columns: 1fr;
    }
    
    .point-info-panel {
        max-width: 100%;
    }
}

@media (max-width: 768px) {
    .temporal-nav {
        padding: 1rem;
    }
    
    .temporal-filters {
        padding: 1rem;
        gap: 1rem;
    }
    
    .filter-group {
        width: 100%;
    }
    
    .filter-select {
        width: 100%;
    }
    
    .maps-grid {
        grid-template-columns: 1fr;
    }
}
</style>

<div class="admin-temporal" ng-show="!showloading">
    <!-- Header com navegação -->
    <div class="temporal-header">
        <div class="temporal-nav">
            <!-- Navegação de pontos -->
            <div class="point-navigation">
                <form ng-submit="submit(point.index)" style="display: flex; align-items: center; gap: 0.5rem;">
                    <input type="number" 
                           class="point-input"
                           ng-model="point.index"
                           ng-disabled="modeEdit"
                           min="1"
                           max="{{total}}"
                           placeholder="Index">
                    <button type="submit" 
                            class="nav-btn primary"
                            ng-disabled="point.index > total || point.index < 1 || modeEdit">
                        <i class="glyphicon glyphicon-search"></i>
                        {{ 'COMMON.SEARCH' | i18n }}
                    </button>
                </form>
                
                <div class="point-navigation">
                    <button class="nav-btn"
                            ng-click="submit(point.index-1)"
                            ng-disabled="point.index <= 1 || point.index > total || modeEdit">
                        <i class="glyphicon glyphicon-chevron-left"></i>
                    </button>
                    <span class="point-counter">{{point.index}} / {{total}}</span>
                    <button class="nav-btn"
                            ng-click="submit(point.index+1)"
                            ng-disabled="point.index >= total || point.index < 1 || modeEdit">
                        <i class="glyphicon glyphicon-chevron-right"></i>
                    </button>
                </div>
            </div>

            <!-- Ordenação -->
            <div class="radio-group">
                <div class="radio-option">
                    <input type="radio" 
                           id="sortIndex"
                           ng-model="typeSort"
                           value="sortedIndex"
                           ng-change="submit(1)"
                           ng-disabled="modeEdit">
                    <label for="sortIndex">{{ 'SUPERVISOR.FILTERS.INDEX' | i18n }}</label>
                </div>
                <div class="radio-option">
                    <input type="radio" 
                           id="sortTime"
                           ng-model="typeSort"
                           value="timeInspection"
                           ng-change="submit(1)"
                           ng-disabled="modeEdit">
                    <label for="sortTime">{{ 'SUPERVISOR.FILTERS.TIME' | i18n }}</label>
                </div>
                <div class="radio-option">
                    <input type="radio" 
                           id="sortAgreement"
                           ng-model="typeSort"
                           value="agreementPoint"
                           ng-change="submit(1)"
                           ng-disabled="modeEdit">
                    <label for="sortAgreement">{{ 'SUPERVISOR.FILTERS.CONSOLIDATED' | i18n }}</label>
                </div>
            </div>
        </div>

        <!-- Filtros -->
        <div class="temporal-filters">
            <div class="filter-group">
                <label class="filter-label">{{ 'SUPERVISOR.FILTERS.CLASSES' | i18n }}:</label>
                <select class="filter-select"
                        ng-model="selectedLandUse"
                        ng-options="landUse for landUse in landUses"
                        ng-change="submit(1)"
                        ng-disabled="modeEdit">
                </select>
            </div>

            <div class="filter-group">
                <label class="filter-label">{{ 'SUPERVISOR.FILTERS.USERS' | i18n }}:</label>
                <select class="filter-select"
                        ng-model="selectUserNames"
                        ng-options="userName for userName in userNames"
                        ng-change="submit(1)"
                        ng-disabled="modeEdit">
                </select>
            </div>

            <div class="filter-group">
                <label class="filter-label" ng-hide="isChaco">{{ 'SUPERVISOR.FILTERS.BIOME' | i18n }}:</label>
                <label class="filter-label" ng-show="isChaco">{{ 'SUPERVISOR.FILTERS.REGION' | i18n }}:</label>
                <select class="filter-select"
                        ng-model="selectBiomes"
                        ng-options="biome for biome in biomes"
                        ng-change="submit(1)"
                        ng-disabled="modeEdit">
                </select>
            </div>

            <div class="filter-group" ng-hide="isChaco">
                <label class="filter-label">{{ 'SUPERVISOR.FILTERS.STATE' | i18n }}:</label>
                <select class="filter-select"
                        ng-model="selectUf"
                        ng-options="uf for uf in stateUF"
                        ng-change="submit(1)"
                        ng-disabled="modeEdit">
                </select>
            </div>
        </div>
    </div>

    <!-- Conteúdo principal -->
    <div class="temporal-content">
        <div class="content-grid">
            <!-- Painel de informações do ponto -->
            <div class="point-info-panel">
                <div class="panel-header">
                    <h3 class="panel-title">{{ 'SUPERVISOR.POINT_INFO.POINT_NUMBER' | i18n }} {{ point.originalIndex }}</h3>
                </div>

                <!-- Localização -->
                <div class="panel-section" ng-show="showPointInfo">
                    <h4 class="section-title">{{ 'SUPERVISOR.POINT_INFO.LOCATION' | i18n }}</h4>
                    <div class="info-item" ng-if="point.biome && !isChaco && !isRaisg">
                        <span class="info-label">{{ 'SUPERVISOR.POINT_INFO.BIOME' | i18n }}:</span>
                        <span class="info-value">{{point.biome}}</span>
                    </div>
                    <div class="info-item" ng-if="point.county && isChaco">
                        <span class="info-label">{{ 'SUPERVISOR.POINT_INFO.REGION' | i18n }}:</span>
                        <span class="info-value">{{point.county}}</span>
                    </div>
                    <div class="info-item" ng-if="point.county && isRaisg">
                        <span class="info-label">{{ 'SUPERVISOR.POINT_INFO.COUNTRY' | i18n }}:</span>
                        <span class="info-value">{{point.county}}</span>
                    </div>
                    <div class="info-item" ng-if="point.county && !isChaco && !isRaisg">
                        <span class="info-label">{{ 'SUPERVISOR.POINT_INFO.MUNICIPALITY' | i18n }}:</span>
                        <span class="info-value">{{point.county}}<span ng-if="point.uf"> - {{point.uf}}</span></span>
                    </div>
                    <div class="info-item" ng-if="point.biome && isChaco">
                        <span class="info-label">{{ 'SUPERVISOR.POINT_INFO.MAP' | i18n }}:</span>
                        <span class="info-value">{{point.biome}}</span>
                    </div>
                    <div class="info-item" ng-if="point.biome && isRaisg">
                        <span class="info-label">{{ 'SUPERVISOR.POINT_INFO.BIOME' | i18n }}:</span>
                        <span class="info-value">{{point.biome}}</span>
                    </div>
                    
                    <!-- Propriedades customizadas -->
                    <div ng-if="point.properties && hasCustomProperties()" style="margin-top: 1rem;">
                        <div class="info-item" ng-repeat="(key, value) in point.properties" ng-if="shouldShowProperty(key)">
                            <span class="info-label">{{formatPropertyName(key)}}:</span>
                            <span class="info-value">{{value}}</span>
                        </div>
                    </div>
                </div>

                <!-- Coordenadas -->
                <div class="panel-section">
                    <h4 class="section-title">{{ 'SUPERVISOR.POINT_INFO.COORDINATES' | i18n }}</h4>
                    <div class="coordinates-box">
                        <div>Lat/Lon: {{point.lat | number:4}}, {{point.lon | number:4}}</div>
                        <div>Lon/Lat: {{point.lon | number:4}}, {{point.lat | number:4}}</div>
                    </div>
                </div>

                <!-- Estatísticas -->
                <div class="panel-section">
                    <h4 class="section-title">{{ 'SUPERVISOR.POINT_INFO.STATISTICS' | i18n }}</h4>
                    <div class="stats-box">
                        <div class="info-item">
                            <span class="info-label">{{ 'SUPERVISOR.POINT_INFO.INSPECTION_TIME' | i18n }}:</span>
                            <span class="stats-value">{{timeInspectionPoint}} {{ 'COMMON.SECONDS' | i18n }}</span>
                        </div>
                    </div>
                </div>

                <!-- Botões de ação -->
                <div class="action-buttons">
                    <button class="action-btn warning" ng-click="changePeriod()">
                        <i class="glyphicon glyphicon-calendar"></i>
                        {{ 'SUPERVISOR.ACTIONS.CHANGE_PERIOD' | i18n }}
                    </button>
                    <button class="action-btn success" ng-click="getKml()">
                        <i class="glyphicon glyphicon-globe"></i>
                        {{ 'SUPERVISOR.ACTIONS.GOOGLE_EARTH' | i18n }}
                    </button>
                    <button class="action-btn primary" 
                            ng-if="objConsolidated.length > 0" 
                            ng-hide="buttonEdit == true"
                            ng-click="editClass()">
                        <i class="glyphicon glyphicon-pencil"></i>
                        {{ 'COMMON.EDIT' | i18n }}
                    </button>
                    <button class="action-btn primary" 
                            ng-hide="buttonEdit == false" 
                            ng-click="saveClass()">
                        <i class="glyphicon glyphicon-floppy-disk"></i>
                        {{ 'COMMON.SAVE' | i18n }}
                    </button>
                    <button class="action-btn danger" 
                            ng-if="point.inspection.length > 0" 
                            ng-click="removeInspections()">
                        <i class="glyphicon glyphicon-trash"></i>
                        {{ 'COMMON.REMOVE' | i18n }}
                    </button>
                    <button class="action-btn info" ng-click="downloadCSVBorda()">
                        <i class="glyphicon glyphicon-download-alt"></i>
                        {{ 'SUPERVISOR.ACTIONS.DOWNLOAD_CSV' | i18n }}
                    </button>
                </div>
            </div>

            <!-- Tabela de inspeções -->
            <div class="inspection-panel">
                <div class="table-tabs">
                    <button class="table-tab" 
                            ng-class="{active: dataTab[0].checked}"
                            ng-click="sortTimeInspection(dataTab[0])"
                            ng-disabled="modeEdit">
                        {{dataTab[0].name}}
                    </button>
                    <button class="table-tab" 
                            ng-class="{active: dataTab[1].checked}"
                            ng-click="sortTimeInspection(dataTab[1])"
                            ng-disabled="modeEdit">
                        {{dataTab[1].name}}
                    </button>
                </div>

                <div class="table-container">
                    <table class="inspection-table">
                        <thead ng-hide="point.inspection == 0">
                            <tr>
                                <th style="width: 200px;">
                                    <span ng-if="dataTab[0].checked">User</span>
                                    <span ng-if="dataTab[1].checked">{{ 'CHARTS.POINT_INSPECTION_TIME' | i18n }}</span>
                                </th>
                                <th ng-if="dataTab[0].checked" ng-repeat="year in point.years">{{year}}</th>
                                <th ng-if="dataTab[1].checked">{{ 'CHARTS.AVG_TIME_ALL_POINTS' | i18n }}</th>
                            </tr>
                        </thead>
                        <tbody ng-hide="point.inspection == 0">
                            <tr ng-if="dataTab[0].checked" ng-repeat="inspection in point.inspection">
                                <td>{{inspection.userName}}</td>
                                <td ng-repeat="landUse in inspection.landUse track by $index">{{landUse}}</td>
                            </tr>
                            <tr ng-if="dataTab[1].checked" 
                                ng-repeat="p in point.dataPointTime track by $index"
                                ng-class="{boldElem: ($index == (point.dataPointTime.length - 1))}">
                                <td>{{p.name}}</td>
                                <td>{{p.totalPointTime}}</td>
                                <td>{{p.meanPointTime | number:2}}</td>
                            </tr>
                        </tbody>
                        <tfoot>
                            <tr class="table-footer" ng-if="buttonEdit">
                                <td>{{ 'SUPERVISOR.POINT_INFO.CONSOLIDATED_CLASS' | i18n }}</td>
                                <td ng-repeat="x in objConsolidated track by $index">
                                    <select ng-options="landUse for landUse in getLandUses track by landUse"
                                            ng-model="selectedLandUses[$index]" 
                                            ng-change="changeClass($index)">
                                    </select>
                                </td>
                            </tr>
                            <tr class="table-footer" ng-if="!buttonEdit && dataTab[0].checked">
                                <td>{{ 'SUPERVISOR.POINT_INFO.CONSOLIDATED_CLASS' | i18n }}</td>
                                <td ng-repeat="landUse in objConsolidated track by $index">{{landUse}}</td>
                            </tr>
                        </tfoot>
                    </table>
                </div>
            </div>
        </div>

        <!-- Seção de mapas -->
        <div class="maps-section">
            <div class="maps-header">
                <h3 class="maps-title">
                    <span ng-hide="isSentinel">{{ 'SUPERVISOR.MAP.LANDSAT_IMAGES' | i18n }}</span>
                    <span ng-show="isSentinel">{{ 'SUPERVISOR.MAP.SENTINEL_IMAGES' | i18n }}</span>
                </h3>
                
                <!-- Seletor de visparam Landsat -->
                <div ng-show="!isSentinel && hasVisParam && point" class="visparam-selector">
                    <div class="visparam-option">
                        <input type="radio" 
                               id="visNatural"
                               ng-model="landsatVisparam" 
                               value="landsat-tvi-true"
                               ng-change="updateLandsatVisparam()">
                        <label for="visNatural">{{ 'SUPERVISOR.MAP.NATURAL_COLOR' | i18n }}</label>
                    </div>
                    <div class="visparam-option">
                        <input type="radio" 
                               id="visAgri"
                               ng-model="landsatVisparam" 
                               value="landsat-tvi-agri"
                               ng-change="updateLandsatVisparam()">
                        <label for="visAgri">{{ 'SUPERVISOR.MAP.AGRICULTURE' | i18n }}</label>
                    </div>
                    <div class="visparam-option">
                        <input type="radio" 
                               id="visFalse"
                               ng-model="landsatVisparam" 
                               value="landsat-tvi-false"
                               ng-change="updateLandsatVisparam()">
                        <label for="visFalse">{{ 'SUPERVISOR.MAP.FALSE_COLOR' | i18n }}</label>
                    </div>
                </div>
            </div>

            <div class="maps-grid">
                <div ng-repeat="map in maps" 
                     class="map-card"
                     lazy-map
                     map-index="{{map.index}}"
                     total-maps="{{maps.length}}"
                     on-visible="onMapVisible(map.index)">
                    
                    <!-- Placeholder enquanto carrega -->
                    <div ng-if="!mapStates[map.index].visible" class="map-placeholder">
                        <div class="loader"></div>
                    </div>
                    
                    <!-- Conteúdo do mapa -->
                    <div ng-if="mapStates[map.index].visible">
                        <div class="map-header">
                            <span class="map-date">{{map.date | date: 'dd/MM/yyyy'}}</span>
                            <span class="map-period">{{periodo}}</span>
                        </div>
                        
                        <!-- Botão Planet -->
                        <span class="planet-button" ng-if="hasMosaicForYear(map.date | date: 'yyyy')">
                            <button class="btn-icon" ng-click="openMosaicDialog(map, point, config)" title="Mosaicos Planet">
                                <i class="fa fa-camera"></i>
                            </button>
                        </span>

                        <!-- Mapa dinâmico ou estático -->
                        <landsat-map ng-if="useDynamicMaps === true && !isSentinel"
                                     lon="point.lon"
                                     lat="point.lat"
                                     zoom="config.zoomLevel"
                                     period="period"
                                     year="map.year"
                                     visparams="['landsat-tvi-true', 'landsat-tvi-agri', 'landsat-tvi-false']">
                        </landsat-map>

                        <inspection-map ng-if="useDynamicMaps !== true || isSentinel"
                                        lon="point.lon"
                                        lat="point.lat"
                                        bounds="map.bounds"
                                        zoom="config.zoomLevel"
                                        tms-url="map.url">
                        </inspection-map>
                    </div>
                </div>
            </div>
        </div>

        <!-- Gráficos -->
        <div class="charts-section" ng-show="showTimeseries">
            <div class="chart-container" ng-show="showChartsLandsat">
                <h4 class="chart-title">{{ 'SUPERVISOR.CHARTS.LANDSAT_SERIES' | i18n }}</h4>
                <div id="LANDSAT"></div>
            </div>
            
            <div class="chart-container" ng-show="showCharts">
                <h4 class="chart-title">{{ 'SUPERVISOR.CHARTS.MODIS_SERIES' | i18n }}</h4>
                <div id="NDVI"></div>
            </div>
            
            <div class="chart-container" ng-show="showChartsNDDI">
                <h4 class="chart-title">{{ 'SUPERVISOR.CHARTS.NDDI_SERIES' | i18n }}</h4>
                <div id="NDDI"></div>
            </div>
        </div>
    </div>
</div>

<!-- Loading overlay -->
<div class="loading-overlay" ng-show="showloading">
    <div class="loader"></div>
</div>