<div class="modal-header">
    <h3 class="modal-title">Pontos da Campanha: {{ campaign._id }}</h3>
</div>
<div class="modal-body" style="max-height: 500px; overflow-y: auto;">
    <div class="row">
        <div class="col-md-12">
            <p><strong>Total de pontos:</strong> {{ totalPoints }}</p>
            <p><strong>Pontos completos:</strong> {{ campaign.completedPoints }} ({{ campaign.progress }}%)</p>
        </div>
    </div>
    
    <div ng-if="loading" class="text-center">
        <i class="glyphicon glyphicon-refresh glyphicon-spin"></i> Carregando pontos...
    </div>
    
    <table ng-if="!loading && points.length > 0" class="table table-striped table-condensed">
        <thead>
            <tr>
                <th>ID</th>
                <th>Lat</th>
                <th>Lon</th>
                <th>Bioma</th>
                <th>UF</th>
                <th>Município</th>
                <th>Inspeções</th>
                <th>Status</th>
            </tr>
        </thead>
        <tbody>
            <tr ng-repeat="point in points">
                <td>{{ point._id }}</td>
                <td>{{ point.lat | number:6 }}</td>
                <td>{{ point.lon | number:6 }}</td>
                <td>{{ point.biome || '-' }}</td>
                <td>{{ point.uf || '-' }}</td>
                <td>{{ point.county || '-' }}</td>
                <td>{{ point.userName.length }}</td>
                <td>
                    <span ng-if="point.userName.length >= campaign.numInspec" class="label label-success">Completo</span>
                    <span ng-if="point.userName.length < campaign.numInspec && point.userName.length > 0" class="label label-warning">Em andamento</span>
                    <span ng-if="point.userName.length == 0" class="label label-default">Não iniciado</span>
                </td>
            </tr>
        </tbody>
    </table>
    
    <div ng-if="!loading && points.length == 0" class="alert alert-info">
        Nenhum ponto encontrado para esta campanha.
    </div>
    
    <div ng-if="totalPoints > pageSize" class="text-center">
        <pagination 
            total-items="totalPoints" 
            ng-model="currentPage" 
            items-per-page="pageSize"
            ng-change="loadPoints()"
            max-size="5">
        </pagination>
    </div>
</div>
<div class="modal-footer">
    <button class="btn btn-default" ng-click="close()">Fechar</button>
</div>